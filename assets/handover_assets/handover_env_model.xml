<mujoco model="franka_handover">

    <size njmax='1000' nconmax='1000'/>

    <include file="basic_scene.xml"/>
    <include file="../franka_assets/assets.xml"/>
    <include file="../franka_assets/actuator.xml"/>
    <include file="item_assets/kettle_asset.xml"/>

    <visual>
        <global offwidth="2560" offheight="1920" />
        <quality shadowsize="4096" offsamples="8" />
        <map force="0.1" fogend="5" />
    </visual>

    <asset>
        <texture name="T_wood" type="cube" height="1" width="1" file="wood1.png" />
        <material name="wood" rgba="1 1 1 1" texture="T_wood" texrepeat="3 3" reflectance="1" shininess="1" texuniform="false" />
    </asset>

    <compiler inertiafromgeom='auto' inertiagrouprange='3 5' angle="radian" texturedir="textures" meshdir="../franka_assets/meshes"/>
    <worldbody>
        <camera name='left_cap' pos='-1.2 -0.5 1.8' quat='0.78 0.49 -0.22 -0.32' />
        <camera name='right_cap' pos='1.2 -0.5 1.8' quat='0.76 0.5 0.21 0.35'/>

        <!-- handover zone -->
        <geom type="box" size="0.2 0.2 0.2" pos="0 0 1.3" rgba="1 0 0 0.15"/>

        <!-- wait zone -->
        <geom type="box" size="0.1 0.1 0.1" pos="0.8 0.15 1.87" rgba="0 0 1 0.15"/>

        <!-- both panda arms -->
        <body pos="0 0 0.76">
            <include file="../franka_assets/chain.xml"/>
        </body>

        <!-- panda reciever table -->
        <body name="panda_receiver_table" pos="0.75 0 0" quat="1 0 0 1">
            <geom material="wood" type="box" size=".6 .375 .025" pos="0 0 0.735" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.59 0.26 .05" pos="0 0 0.66" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="-0.565 0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="-0.565 -0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="0.565 0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="0.565 -0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
        </body>

        <!-- panda giver table -->
        <body name="panda_giver_table" pos="-0.75 0 0" quat="1 0 0 1">
            <geom material="wood" type="box" size=".6 .375 .025" pos="0 0 0.735" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.59 0.26 .05" pos="0 0 0.66" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="-0.565 0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="-0.565 -0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="0.565 0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
            <geom material="metal" type="box" size="0.025 0.025 0.305" pos="0.565 -0.235 0.305" mass="2000" contype='1' condim='3' conaffinity='1'/>
        </body>

        
        <!-- kettle -->
        <!-- <body name="kettle" pos="-0.75 0.4 0.76" quat="0 0 0 0.707">
            <freejoint name="kettle"/>
            <include file="item_assets/kettle_chain.xml" size='0.75 0.75 0.75'/>
        </body> -->

        <!-- height to lift to -->
        <geom type="box" size="0.02 0.02 0.02" pos="-0.75 0.35 0.9" rgba="0 1 1 0.5"/>

        <!-- initial object zone -->
        <geom type="box" size="0.1 0.1 0.1" pos="-0.75 0.35 0.83" rgba="0 1 0 0.15"/>

        <!-- object -->
        <body name="box" pos="-0.75 0.35 0.785">
            <freejoint name="box"/>
            <include file="item_assets/kettle_chain.xml" size='0.75 0.75 0.75'/>
        </body>
    </worldbody>
</mujoco>
