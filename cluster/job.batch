#!/bin/bash -xv
#SBATCH --job-name=rl_train
#SBATCH --output=/home-mscluster/abrickhill/research/RR/cluster/result.txt
#SBATCH --error=/home-mscluster/abrickhill/research/RR/cluster/error.txt
#SBATCH --ntasks=8
#SBATCH --time=72:00:00
#SBATCH --partition=bigbatch
export MUJOCO_GL="egl"
export PYTHONVERBOSE=1

# Run 8 processes in parallel, each with its own output and error file
for i in {1..10}; do
    python3 ../environment/trainwandbViolation.py > /home-mscluster/abrickhill/research/RR/cluster/output_$i.txt 2> /home-mscluster/abrickhill/research/RR/cluster/error_$i.txt
    echo "Process $i exited with status $?" >> /home-mscluster/abrickhill/research/RR/cluster/exit_statuses.txt &
done

wait  # Wait for all background processes to finish

echo "All processes completed. Check individual error files and exit_statuses.txt for details."